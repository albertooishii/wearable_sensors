{
    "version": "2.1",
    "device_type": "xiaomi_smart_band_9",
    "display_name": "Xiaomi Smart Band 9 (FE95 Protocol V1)",
    "service_filter": [
        "0000FE95-0000-1000-8000-00805F9B34FB"
    ],
    "services": {
        "FE95": {
            "uuid": "0000FE95-0000-1000-8000-00805F9B34FB",
            "name": "Xiaomi Encrypted Service",
            "characteristics": {
                "command_write": {
                    "uuid": "00000051-0000-1000-8000-00805F9B34FB",
                    "properties": [
                        "write_no_response"
                    ],
                    "description": "Xiaomi SPP Protocol V1 - AUTH ONLY: TX characteristic for sending auth commands during BLE authentication phase"
                },
                "command_read": {
                    "uuid": "00000052-0000-1000-8000-00805F9B34FB",
                    "properties": [
                        "notify"
                    ],
                    "description": "Xiaomi SPP Protocol V1 - AUTH ONLY: RX characteristic for receiving auth responses during BLE authentication phase"
                }
            }
        }
    },
    "data_parsers": {},
    "authentication": {
        "protocol": "xiaomi_spp",
        "connection_type": "spp_over_ble",
        "service_uuid": "0000FE95-0000-1000-8000-00805F9B34FB",
        "command_read_uuid": "00000052-0000-1000-8000-00805F9B34FB",
        "command_write_uuid": "00000051-0000-1000-8000-00805F9B34FB",
        "encryption_required": true,
        "data_reading_note": "⚠️ After authentication completes, BLE connection DISCONNECTS. All data reading (battery, sensors, etc.) happens via BT_CLASSIC/SPP only. BLE characteristics above are ONLY used during the AUTH phase.",
        "spp_protocol": {
            "version": "v1",
            "version_detection": {
                "enabled": false,
                "note": "Band 9 confirmed to use V1 only"
            },
            "v1_note": "All SPP V1 protocol values are UNIVERSAL across Xiaomi devices (hardcoded in code). See lib/shared/services/bluetooth/xiaomi/protocol/v1/constants.dart"
        },
        "auth_flow": {
            "step_1": "Send CMD_NONCE (type=1, subtype=26) with phoneNonce as SPP packet",
            "step_2": "Receive watchNonce + HMAC verification as SPP packet",
            "step_3": "Send CMD_AUTH (type=1, subtype=27) with encrypted device info as SPP packet",
            "step_4": "Receive confirmation (status=1 for success)"
        },
        "notes": "Smart Band 9 uses SPP Protocol V1 (confirmed) over BLE with separate write (0051) and notify (0052) characteristics. Based on Gadgetbridge XiaomiSppProtocolV1.java"
    }
}